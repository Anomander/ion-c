<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Amazon Ion C: ionc/ionc/inc/ion_reader.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>ionc/ionc/inc/ion_reader.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright 2009-2016 Amazon.com, Inc. or its affiliates. All Rights Reserved.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;).</span>
<a name="l00005"></a>00005 <span class="comment"> * You may not use this file except in compliance with the License.</span>
<a name="l00006"></a>00006 <span class="comment"> * A copy of the License is located at:</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> *     http://aws.amazon.com/apache2.0/</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * or in the &quot;license&quot; file accompanying this file. This file is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00011"></a>00011 <span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific</span>
<a name="l00012"></a>00012 <span class="comment"> * language governing permissions and limitations under the License.</span>
<a name="l00013"></a>00013 <span class="comment"> */</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// defines for the readers, common, text and binary</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 <span class="preprocessor">#ifndef ION_READER_H_</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#define ION_READER_H_</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#include &quot;ion_types.h&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;ion_stream.h&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00024"></a>00024 <span class="preprocessor">#endif</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00041"></a><a class="code" href="struct__ion__reader__options.html">00041</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__ion__reader__options.html">_ion_reader_options</a>
<a name="l00042"></a>00042 {
<a name="l00046"></a><a class="code" href="struct__ion__reader__options.html#a96be4a238dd7fc187c6997a1e585bffe">00046</a>     BOOL <a class="code" href="struct__ion__reader__options.html#a96be4a238dd7fc187c6997a1e585bffe">return_system_values</a>;
<a name="l00047"></a>00047 
<a name="l00052"></a><a class="code" href="struct__ion__reader__options.html#a66c722614414f3a194a3b08d2e44a225">00052</a>     BOOL <a class="code" href="struct__ion__reader__options.html#a66c722614414f3a194a3b08d2e44a225">return_shared_symbol_tables</a>;
<a name="l00053"></a>00053 
<a name="l00057"></a><a class="code" href="struct__ion__reader__options.html#a1f01b7eb82ea6f88f97ca3731132f779">00057</a>     <span class="keywordtype">int</span>  <a class="code" href="struct__ion__reader__options.html#a1f01b7eb82ea6f88f97ca3731132f779">new_line_char</a>;
<a name="l00058"></a>00058 
<a name="l00062"></a><a class="code" href="struct__ion__reader__options.html#a6fca8740ef07efeb69d987ec3f3f2776">00062</a>     SIZE <a class="code" href="struct__ion__reader__options.html#a6fca8740ef07efeb69d987ec3f3f2776">max_container_depth</a>;
<a name="l00063"></a>00063 
<a name="l00067"></a><a class="code" href="struct__ion__reader__options.html#a58757a6aaf84439890bf4dc7c0c51590">00067</a>     SIZE <a class="code" href="struct__ion__reader__options.html#a58757a6aaf84439890bf4dc7c0c51590">max_annotation_count</a>;
<a name="l00068"></a>00068 
<a name="l00075"></a><a class="code" href="struct__ion__reader__options.html#a4812d719d51bc28ccae0fa673b3bb12d">00075</a>     SIZE <a class="code" href="struct__ion__reader__options.html#a4812d719d51bc28ccae0fa673b3bb12d">max_annotation_buffered</a>;
<a name="l00076"></a>00076 
<a name="l00080"></a><a class="code" href="struct__ion__reader__options.html#a264fe1a772b8847c549918c472259c08">00080</a>     SIZE <a class="code" href="struct__ion__reader__options.html#a264fe1a772b8847c549918c472259c08">symbol_threshold</a>;
<a name="l00081"></a>00081 
<a name="l00089"></a><a class="code" href="struct__ion__reader__options.html#a003535c15d2cf3892cb8fec635e0130a">00089</a>     SIZE <a class="code" href="struct__ion__reader__options.html#a003535c15d2cf3892cb8fec635e0130a">user_value_threshold</a>;
<a name="l00090"></a>00090 
<a name="l00096"></a><a class="code" href="struct__ion__reader__options.html#ab9806c0870cf6d660588c5a08858a4b7">00096</a>     SIZE <a class="code" href="struct__ion__reader__options.html#ab9806c0870cf6d660588c5a08858a4b7">chunk_threshold</a>;
<a name="l00097"></a>00097 
<a name="l00101"></a><a class="code" href="struct__ion__reader__options.html#a602751ed35ce2bf08ebdbe3b8e038755">00101</a>     SIZE <a class="code" href="struct__ion__reader__options.html#a602751ed35ce2bf08ebdbe3b8e038755">allocation_page_size</a>;
<a name="l00102"></a>00102 
<a name="l00106"></a><a class="code" href="struct__ion__reader__options.html#a99fadf58f90f554e9e276ade13ac9b92">00106</a>     BOOL <a class="code" href="struct__ion__reader__options.html#a99fadf58f90f554e9e276ade13ac9b92">skip_character_validation</a>;
<a name="l00107"></a>00107 
<a name="l00111"></a><a class="code" href="struct__ion__reader__options.html#aa3454906a404ccb6702b155f3f9d377d">00111</a>     <a class="code" href="struct__ion__catalog.html">ION_CATALOG</a> *<a class="code" href="struct__ion__reader__options.html#aa3454906a404ccb6702b155f3f9d377d">pcatalog</a>;
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 } <a class="code" href="struct__ion__reader__options.html">ION_READER_OPTIONS</a>;
<a name="l00114"></a>00114 
<a name="l00115"></a>00115 <span class="comment">//</span>
<a name="l00116"></a>00116 <span class="comment">// Ion Reader interface.  Takes a byte buffer and length which</span>
<a name="l00117"></a>00117 <span class="comment">// may have text or binary content, returns handle to a reader.</span>
<a name="l00118"></a>00118 <span class="comment">//</span>
<a name="l00119"></a>00119 
<a name="l00131"></a>00131 ION_API_EXPORT iERR ion_reader_open_buffer(<a class="code" href="struct__ion__reader.html">hREADER</a> *p_hreader
<a name="l00132"></a>00132                                           ,BYTE *buffer
<a name="l00133"></a>00133                                           ,SIZE buf_length
<a name="l00134"></a>00134                                           ,<a class="code" href="struct__ion__reader__options.html">ION_READER_OPTIONS</a> *p_options);
<a name="l00135"></a>00135 
<a name="l00182"></a>00182 ION_API_EXPORT iERR ion_reader_open_stream(<a class="code" href="struct__ion__reader.html">hREADER</a> *p_hreader
<a name="l00183"></a>00183                                           ,<span class="keywordtype">void</span> *handler_state
<a name="l00184"></a>00184                                           ,ION_STREAM_HANDLER fn_input_handler
<a name="l00185"></a>00185                                           ,<a class="code" href="struct__ion__reader__options.html">ION_READER_OPTIONS</a> *p_options);
<a name="l00186"></a>00186 
<a name="l00201"></a>00201 ION_API_EXPORT iERR ion_reader_reset_stream(<a class="code" href="struct__ion__reader.html">hREADER</a> *p_hreader
<a name="l00202"></a>00202                                            ,<span class="keywordtype">void</span> *handler_state
<a name="l00203"></a>00203                                            ,ION_STREAM_HANDLER fn_input_handler);
<a name="l00204"></a>00204 
<a name="l00226"></a>00226 ION_API_EXPORT iERR ion_reader_reset_stream_with_length(<a class="code" href="struct__ion__reader.html">hREADER</a> *p_hreader
<a name="l00227"></a>00227                                                        ,<span class="keywordtype">void</span> *handler_state
<a name="l00228"></a>00228                                                        ,ION_STREAM_HANDLER fn_input_handler
<a name="l00229"></a>00229                                                        ,POSITION length);
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 ION_API_EXPORT iERR ion_reader_open                    (<a class="code" href="struct__ion__reader.html">hREADER</a> *p_hreader
<a name="l00232"></a>00232                                                        ,<a class="code" href="struct__ion__stream.html">ION_STREAM</a> *p_stream
<a name="l00233"></a>00233                                                        ,<a class="code" href="struct__ion__reader__options.html">ION_READER_OPTIONS</a> *p_options);
<a name="l00234"></a>00234 ION_API_EXPORT iERR ion_reader_get_catalog             (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <a class="code" href="struct__ion__catalog.html">hCATALOG</a> *p_hcatalog);
<a name="l00235"></a>00235 ION_API_EXPORT iERR ion_reader_get_symbol_table        (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <a class="code" href="struct__ion__symbol__table.html">hSYMTAB</a>  *p_hsymtab);
<a name="l00236"></a>00236 
<a name="l00254"></a>00254 ION_API_EXPORT iERR ion_reader_seek                (<a class="code" href="struct__ion__reader.html">hREADER</a>  hreader
<a name="l00255"></a>00255                                                    ,POSITION offset
<a name="l00256"></a>00256                                                    ,SIZE     length);
<a name="l00263"></a>00263 ION_API_EXPORT iERR ion_reader_set_symbol_table    (<a class="code" href="struct__ion__reader.html">hREADER</a>   hreader
<a name="l00264"></a>00264                                                    ,<a class="code" href="struct__ion__symbol__table.html">hSYMTAB</a>   hsymtab);
<a name="l00269"></a>00269 ION_API_EXPORT iERR ion_reader_get_value_offset    (<a class="code" href="struct__ion__reader.html">hREADER</a>   hreader
<a name="l00270"></a>00270                                                    ,POSITION *p_offset);
<a name="l00277"></a>00277 ION_API_EXPORT iERR ion_reader_get_value_length    (<a class="code" href="struct__ion__reader.html">hREADER</a>  hreader
<a name="l00278"></a>00278                                                    ,SIZE   *p_length);
<a name="l00285"></a>00285 ION_API_EXPORT iERR ion_reader_get_symbol_table    (<a class="code" href="struct__ion__reader.html">hREADER</a>   hreader
<a name="l00286"></a>00286                                                    ,<a class="code" href="struct__ion__symbol__table.html">hSYMTAB</a>  *p_hsymtab);
<a name="l00291"></a>00291 ION_API_EXPORT iERR ion_reader_next                (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, ION_TYPE *p_value_type);
<a name="l00292"></a>00292 ION_API_EXPORT iERR ion_reader_step_in             (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader);
<a name="l00293"></a>00293 ION_API_EXPORT iERR ion_reader_step_out            (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader);
<a name="l00294"></a>00294 ION_API_EXPORT iERR ion_reader_get_depth           (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, SIZE *p_depth);
<a name="l00295"></a>00295 
<a name="l00299"></a>00299 ION_API_EXPORT iERR ion_reader_get_type            (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, ION_TYPE *p_value_type);
<a name="l00300"></a>00300 ION_API_EXPORT iERR ion_reader_has_any_annotations (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, BOOL *p_has_any_annotations);
<a name="l00301"></a>00301 ION_API_EXPORT iERR ion_reader_has_annotation      (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <a class="code" href="struct__ion__string.html">iSTRING</a> annotation, BOOL *p_annotation_found);
<a name="l00302"></a>00302 ION_API_EXPORT iERR ion_reader_is_null             (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, BOOL *p_is_null);
<a name="l00303"></a>00303 ION_API_EXPORT iERR ion_reader_get_field_name      (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <a class="code" href="struct__ion__string.html">iSTRING</a> p_str);
<a name="l00304"></a>00304 ION_API_EXPORT iERR ion_reader_get_field_sid       (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, SID *p_sid);
<a name="l00305"></a>00305 ION_API_EXPORT iERR ion_reader_get_annotations     (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <a class="code" href="struct__ion__string.html">iSTRING</a> p_strs, SIZE max_count, SIZE *p_count);
<a name="l00306"></a>00306 ION_API_EXPORT iERR ion_reader_get_annotation_sids (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, SID *p_sids, SIZE max_count, SIZE *p_count);
<a name="l00307"></a>00307 ION_API_EXPORT iERR ion_reader_get_annotation_count(<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, SIZE *p_count);
<a name="l00308"></a>00308 ION_API_EXPORT iERR ion_reader_get_an_annotation   (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <span class="keywordtype">int</span> idx, <a class="code" href="struct__ion__string.html">iSTRING</a> p_strs);
<a name="l00309"></a>00309 ION_API_EXPORT iERR ion_reader_read_null           (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, ION_TYPE *p_value);
<a name="l00310"></a>00310 ION_API_EXPORT iERR ion_reader_read_bool           (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, BOOL *p_value);
<a name="l00311"></a>00311 
<a name="l00316"></a>00316 ION_API_EXPORT iERR ion_reader_read_int            (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <span class="keywordtype">int</span> *p_value);
<a name="l00317"></a>00317 
<a name="l00322"></a>00322 ION_API_EXPORT iERR ion_reader_read_int32            (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, int32_t *p_value);
<a name="l00323"></a>00323 
<a name="l00328"></a>00328 ION_API_EXPORT iERR ion_reader_read_int64          (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, int64_t *p_value);
<a name="l00329"></a>00329 
<a name="l00333"></a>00333 ION_API_EXPORT iERR ion_reader_read_ion_int        (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <a class="code" href="struct__ion__int.html">ION_INT</a> *p_value);
<a name="l00334"></a>00334 
<a name="l00339"></a>00339 ION_API_EXPORT iERR ion_reader_read_long           (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <span class="keywordtype">long</span> *p_value);
<a name="l00340"></a>00340 ION_API_EXPORT iERR ion_reader_read_double         (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <span class="keywordtype">double</span> *p_value);
<a name="l00341"></a>00341 ION_API_EXPORT iERR ion_reader_read_decimal        (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, decQuad *p_value);
<a name="l00342"></a>00342 
<a name="l00346"></a>00346 ION_API_EXPORT iERR ion_reader_read_timestamp      (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <a class="code" href="struct__ion__timestamp.html">iTIMESTAMP</a> p_value);
<a name="l00347"></a>00347 ION_API_EXPORT iERR ion_reader_read_symbol_sid     (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, SID *p_value);
<a name="l00348"></a>00348 
<a name="l00359"></a>00359 ION_API_EXPORT iERR ion_reader_get_string_length   (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, SIZE *p_length); <span class="comment">// note this may require the string value to be loaded in memory</span>
<a name="l00360"></a>00360 ION_API_EXPORT iERR ion_reader_read_string         (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, <a class="code" href="struct__ion__string.html">iSTRING</a> p_value);
<a name="l00361"></a>00361 ION_API_EXPORT iERR ion_reader_read_partial_string (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, BYTE *p_buf, SIZE buf_max, SIZE *p_length);
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 <span class="comment">// TODO: move this to get_value_size, get_value_bytes, get_value_chuck that can read</span>
<a name="l00364"></a>00364 <span class="comment">//       string, long int, decimal and timestamp values in addition to blob and clob</span>
<a name="l00365"></a>00365 ION_API_EXPORT iERR ion_reader_get_lob_size          (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, SIZE *p_length); <span class="comment">// this may require the lob value to be loaded in memroy</span>
<a name="l00366"></a>00366 ION_API_EXPORT iERR ion_reader_read_lob_bytes        (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, BYTE *p_buf, SIZE buf_max, SIZE *p_length);
<a name="l00367"></a>00367 ION_API_EXPORT iERR ion_reader_read_lob_partial_bytes(<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, BYTE *p_buf, SIZE buf_max, SIZE *p_length);
<a name="l00368"></a>00368 
<a name="l00369"></a>00369 ION_API_EXPORT iERR ion_reader_get_position          (<a class="code" href="struct__ion__reader.html">hREADER</a> hreader, int64_t *p_bytes, int32_t *p_line, int32_t *p_offset);
<a name="l00370"></a>00370 
<a name="l00378"></a>00378 ION_API_EXPORT iERR ion_reader_close(<a class="code" href="struct__ion__reader.html">hREADER</a> hreader);
<a name="l00379"></a>00379 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00380"></a>00380 <span class="preprocessor"></span>}
<a name="l00381"></a>00381 <span class="preprocessor">#endif</span>
<a name="l00382"></a>00382 <span class="preprocessor"></span>
<a name="l00383"></a>00383 <span class="preprocessor">#endif</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 30 Jun 2016 for Amazon Ion C by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
