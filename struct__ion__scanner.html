<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Amazon Ion C: _ion_scanner Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>_ion_scanner Struct Reference</h1><!-- doxytag: class="_ion_scanner" -->
<p><code>#include &lt;<a class="el" href="ion__scanner_8h_source.html">ion_scanner.h</a>&gt;</code></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct__ion__stream.html">ION_STREAM</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__ion__scanner.html#a25949f77e11685c696c61b6f0bb6870b">_stream</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct__ion__string.html">ION_STRING</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__ion__scanner.html#ae6f9b2ef5839a1ba126dd30298f0cabd">_value_image</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92745a92ca762097bd2986b5e8ad317e"></a><!-- doxytag: member="_ion_scanner::_value_buffer" ref="a92745a92ca762097bd2986b5e8ad317e" args="" -->
BYTE *&nbsp;</td><td class="memItemRight" valign="bottom"><b>_value_buffer</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2e0573c982db46c4226455daa54ba0f9"></a><!-- doxytag: member="_ion_scanner::_value_buffer_length" ref="a2e0573c982db46c4226455daa54ba0f9" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_value_buffer_length</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__ion__scanner.html#af5046b8f0ff8be9f2d60cc7d7c88a964">_value_location</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">POSITION&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__ion__scanner.html#ab1b3a3f62984798e2769035aaaf95c97">_value_start</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BYTE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__ion__scanner.html#a63c1ae386de058c9e95973b1b691f459">_pending_bytes</a> [PENDING_BYTES_MAX]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0c3319a5d4672186fbfc36903f1de227"></a><!-- doxytag: member="_ion_scanner::_pending_bytes_pos" ref="a0c3319a5d4672186fbfc36903f1de227" args="" -->
BYTE *&nbsp;</td><td class="memItemRight" valign="bottom"><b>_pending_bytes_pos</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2dc7c376e379fa858d0c2a743bf56bc1"></a><!-- doxytag: member="_ion_scanner::_pending_bytes_end" ref="a2dc7c376e379fa858d0c2a743bf56bc1" args="" -->
BYTE *&nbsp;</td><td class="memItemRight" valign="bottom"><b>_pending_bytes_end</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct__ion__sub__type.html">ION_SUB_TYPE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__ion__scanner.html#aed5edd41ffad59a50cbe57f821e6c607">_unread_sub_type</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3998cb53b20eec482e9b5e399e0ccd19"></a><!-- doxytag: member="_ion_scanner::_unread_value_location" ref="a3998cb53b20eec482e9b5e399e0ccd19" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>_unread_value_location</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a26dc5eee03e4ca78c41e4bd5ac6c819c"></a><!-- doxytag: member="_ion_scanner::_unread_value_length" ref="a26dc5eee03e4ca78c41e4bd5ac6c819c" args="" -->
SIZE&nbsp;</td><td class="memItemRight" valign="bottom"><b>_unread_value_length</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__ion__scanner.html#a500743dfc3af46f0364c481ab55f9efd">_line</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__ion__scanner.html#a34d2bf4ab5eba477f8ac7a0bbbaa5155">_offset</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__ion__scanner.html#a2a48b5037f7307e8148c7667a65e06ec">_saved_offset</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>the text scanner handles actual reading of bytes from the input stream and recognizing tokens, and converting values as necessary.</p>
<p>This is (currently) only a member of the ion_reader_text structure and not separately allocated.</p>
<p>It holds the input stream, tracks read characters, counts lines and handles special read and unread cases (such as unicode byte order mark and different end of line encodings). </p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a500743dfc3af46f0364c481ab55f9efd"></a><!-- doxytag: member="_ion_scanner::_line" ref="a500743dfc3af46f0364c481ab55f9efd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="struct__ion__scanner.html#a500743dfc3af46f0364c481ab55f9efd">_ion_scanner::_line</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Used to keep track of the location (line number) of the current token. It's for debugging and error reporting. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="struct__ion__scanner.html#a34d2bf4ab5eba477f8ac7a0bbbaa5155">_offset</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a34d2bf4ab5eba477f8ac7a0bbbaa5155"></a><!-- doxytag: member="_ion_scanner::_offset" ref="a34d2bf4ab5eba477f8ac7a0bbbaa5155" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="struct__ion__scanner.html#a34d2bf4ab5eba477f8ac7a0bbbaa5155">_ion_scanner::_offset</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Used to keep track of the location (column number) of the current token. It's for debugging purpose and error reporting. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="struct__ion__scanner.html#a500743dfc3af46f0364c481ab55f9efd">_line</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a63c1ae386de058c9e95973b1b691f459"></a><!-- doxytag: member="_ion_scanner::_pending_bytes" ref="a63c1ae386de058c9e95973b1b691f459" args="[PENDING_BYTES_MAX]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BYTE <a class="el" href="struct__ion__scanner.html#a63c1ae386de058c9e95973b1b691f459">_ion_scanner::_pending_bytes</a>[PENDING_BYTES_MAX]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This small buffer is used to hold bytes used during base64 decoding. It is typically used when a base64 value cross an input page buffer.</p>
<p>or it holds pending bytes while writing out a utf8 character, which can be 4 bytes long </p>

</div>
</div>
<a class="anchor" id="a2a48b5037f7307e8148c7667a65e06ec"></a><!-- doxytag: member="_ion_scanner::_saved_offset" ref="a2a48b5037f7307e8148c7667a65e06ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="struct__ion__scanner.html#a2a48b5037f7307e8148c7667a65e06ec">_ion_scanner::_saved_offset</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Internal temporary variable used to keep track of the column number. There are (currently) no states where it's necessary to pre-read over more than a single new line, so we only need 1 saved offset </p>

</div>
</div>
<a class="anchor" id="a25949f77e11685c696c61b6f0bb6870b"></a><!-- doxytag: member="_ion_scanner::_stream" ref="a25949f77e11685c696c61b6f0bb6870b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__ion__stream.html">ION_STREAM</a>* <a class="el" href="struct__ion__scanner.html#a25949f77e11685c696c61b6f0bb6870b">_ion_scanner::_stream</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>this is a copy of the pointer to the ion_stream it is handy to have in the ion_scanner routines so it is unnecessary to pass in the parser and have to dereference from reader to text parser to stream </p>

</div>
</div>
<a class="anchor" id="aed5edd41ffad59a50cbe57f821e6c607"></a><!-- doxytag: member="_ion_scanner::_unread_sub_type" ref="aed5edd41ffad59a50cbe57f821e6c607" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__ion__sub__type.html">ION_SUB_TYPE</a> <a class="el" href="struct__ion__scanner.html#aed5edd41ffad59a50cbe57f821e6c607">_ion_scanner::_unread_sub_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>An unread token. We only support 1 unread token. If the unread token is one which must be cached (in the text_readers value buffer) then it is expected to be _generally_ undisturbed by the callers. However the start location and the value length (when the value is in the value image string) are, so we have to save them as well. </p>

</div>
</div>
<a class="anchor" id="ae6f9b2ef5839a1ba126dd30298f0cabd"></a><!-- doxytag: member="_ion_scanner::_value_image" ref="ae6f9b2ef5839a1ba126dd30298f0cabd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__ion__string.html">ION_STRING</a> <a class="el" href="struct__ion__scanner.html#ae6f9b2ef5839a1ba126dd30298f0cabd">_ion_scanner::_value_image</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If the value had to be read into a buffer to be passed to the user it is stored here. </p>

</div>
</div>
<a class="anchor" id="af5046b8f0ff8be9f2d60cc7d7c88a964"></a><!-- doxytag: member="_ion_scanner::_value_location" ref="af5046b8f0ff8be9f2d60cc7d7c88a964" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="struct__ion__scanner.html#af5046b8f0ff8be9f2d60cc7d7c88a964">_ion_scanner::_value_location</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>this keeps track of whether the value is pending in the input stream (like string sometimes, blob and clob usually) or if it has been copied into the value image (like numeric types and symbols)</p>
<p>_value_location choices: SVL_NONE, SVL_VALUE_IMAGE, SVL_IN_STREAM </p>

</div>
</div>
<a class="anchor" id="ab1b3a3f62984798e2769035aaaf95c97"></a><!-- doxytag: member="_ion_scanner::_value_start" ref="ab1b3a3f62984798e2769035aaaf95c97" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">POSITION <a class="el" href="struct__ion__scanner.html#ab1b3a3f62984798e2769035aaaf95c97">_ion_scanner::_value_start</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>this is set after we have read the first non-whitespace character during scanner next(). If this is a value, it starts here. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>ionc/ionc/<a class="el" href="ion__scanner_8h_source.html">ion_scanner.h</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 30 Jun 2016 for Amazon Ion C by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
